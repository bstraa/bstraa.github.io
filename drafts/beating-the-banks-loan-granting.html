
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://bstraa.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://bstraa.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://bstraa.github.io/theme/font-awesome/css/font-awesome.min.css">





  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Ben Straate" />
<meta name="description" content="Category: Tags: Slug: classification Authors: Ben Straate Summary: Finding Profitable Lending Opportunities Using Classification Background Have you ever noticed the plethora of banks in nearly every city skyline worldwide? If you haven't, keep this in mind next time your near downtown --- it is so true. Much of their success stems …" />
<meta name="keywords" content="">
<meta property="og:site_name" content="Ben Straate"/>
<meta property="og:title" content="Beating the Banks - Loan Granting"/>
<meta property="og:description" content="Category: Tags: Slug: classification Authors: Ben Straate Summary: Finding Profitable Lending Opportunities Using Classification Background Have you ever noticed the plethora of banks in nearly every city skyline worldwide? If you haven't, keep this in mind next time your near downtown --- it is so true. Much of their success stems …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://bstraa.github.io/drafts/beating-the-banks-loan-granting.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-04-28 10:20:00-07:00"/>
<meta property="article:modified_time" content="2017-04-28 10:20:00-07:00"/>
<meta property="article:author" content="https://bstraa.github.io/author/ben-straate.html">
<meta property="article:section" content="articles"/>
<meta property="og:image" content="/images/me.png">

  <title>Ben Straate &ndash; Beating the Banks - Loan Granting</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://bstraa.github.io">
        <img src="/images/me.png" alt="Ben Straate" title="Ben Straate">
      </a>
      <h1><a href="https://bstraa.github.io">Ben Straate</a></h1>


      <nav>
        <ul class="list">
          <li><a href="https://bstraa.github.io/pages/about-me.html">About Me</a></li>
          <li><a href="https://bstraa.github.io/pages/Connect.html">Connect</a></li>

          <li><a href="https://www.linkedin.com/in/benstraate" target="_blank">LinkedIn</a></li>
          <li><a href="https://github.com/bstraa" target="_blank">Github</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-You can add links in your config file" href="#" target="_blank"><i class="fa fa-You can add links in your config file"></i></a></li>
        <li><a class="sc-Another social link" href="#" target="_blank"><i class="fa fa-Another social link"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>


<article class="single">
  <header>
    <h1 id="beating-the-banks-loan-granting">Beating the Banks - Loan Granting</h1>
    <p>
          Posted on Fri 28 April 2017 in <a href="https://bstraa.github.io/category/articles.html">articles</a>


    </p>
  </header>


  <div>
    <p>Category: 
Tags: 
Slug: classification
Authors: Ben Straate
Summary:  Finding Profitable Lending Opportunities Using Classification  <img alt="Banks" src="/images/beatingbanks.png"></p>
<h2><strong>Background</strong></h2>
<h4>Have you ever noticed the plethora of banks in nearly every city skyline worldwide?  If you haven't, keep this in mind next time your near downtown --- it is <em>so true</em>.</h4>
<p><img alt="Banks" src="/images/banks.png" title="Skyline"></p>
<h4>Much of their success  stems from intelligently lending money to borrowers.  Essentially, they are excellent at betting on specific loans having a positive expected value given a certain amount of risk.</h4>
<h4>I wanted to take a closer look at their strategy and see if it was possible to beat their profitability with my own model.  I created a 'toy game' which looked at borrowers to determine if their loan would be a profitable investment for a bank.</h4>
<h4>I highly value 'toy games' because they help develop a solid (yet simple!) understanding of something much more complex.  It's dangerous to get caught in a thick intellectual fog because it's too easy to miss the important stuff.</h4>
<h2><strong>Acquiring Data</strong></h2>
<h4>I acquired publicly available data which was preprocessed.  It consisted of 100,000+ datapoints from two tables about the bank's decisions and data containing information about the borrower.</h4>
<h2><strong>Exploration</strong></h2>
<h4>Here is a look at our dependent variable, profitability.  As this is a 'toy game', the values include only -1, 0, and 1.  These correspond to a loss, loan rejection (no action), and a profit.</h4>
<p><img alt="bank_profitability" src="/images/banks1.png"></p>
<h4>There isn't any profitability information about loans which weren't granted (values of 0) --- I dropped these.</h4>
<h4>Although the data was preprocessed, it did require imputing NaN values.  The two distinct groups of NaN values which needed to be imputed were:</h4>
<ul>
<li>
<h4>1) Features which contained information about repaying various types of previous loans where the borrower didn't ever have any loans.</h4>
</li>
<li>
<h4>2) Features which contained averages of previous debt (like credit cards) where the borrower didn't have a credit line to begin with.</h4>
</li>
</ul>
<h4>I imputed values for these which were outside the range of normal values.  I chose -1 because in addition to being outside the range it has high interpretability.</h4>
<h2><strong>Further Analysis and Modelling</strong></h2>
<h4>I wanted to take a close look at variables in the context of profitable vs non-profitable loans to get a better feel for the data before doing any modelling.  It was interesting to see how loan profitability by the number of dependents and also yearly salary varied.  Below are a couple graphs --- check it out!</h4>
<p><img alt="bank_dependents" src="/images/banksdependents.png">
<img alt="bank_salary" src="/images/bankssalary.png"></p>
<h4>Something else I found interesting are the plots below showing the banks tend to be profitable lending to people with higher checking and savings account balances.  This makes a lot of sense --- lending to someone with more cash in hand certainly seems less risky.</h4>
<p><img alt="banks_checking" src="/images/bankschecking.png">
<img alt="banks_savings" src="/images/bankssaving.png"></p>
<h4>I also fit a decision tree to determine which variables are important and both checking and savings amounts have a high gini index (and entropy) because they are nodes which effectively separate the classes and exhibit high information gain.</h4>
<p><img alt="bank_profitability_important_features" src="/images/banks2.png"></p>
<h4>After training a decision tree and testing it, I got my first look into how this basic algorithm compared to the banks.  It didn't do as well!  As you'll see below, our model is about 4% <em>less</em> profitable.  However, this was still encouraging as there are other tree algorithms which are much more powerful.</h4>
<p><img alt="banks_profit" src="/images/banksprofit.png"></p>
<h4>I wanted to see if there was any improvement with ensemble methods, as DT's tend to perform worse and generally overfit.  Random Forests proved to be a much more profitable model --- 11% <em>more</em> profitable than the banks!</h4>
<p><img alt="banks_profit2" src="/images/banksprofit2.png"></p>
<!--## **Final Model and Validation**
-->

<!--## **What I learned**
-->

<!--## **Further Steps**
-->
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>




</article>

    <footer>
<p>&copy; Ben Straate </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98299538-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Ben Straate ",
  "url" : "https://bstraa.github.io",
  "image": "/images/me.png",
  "description": ""
}
</script>
</body>
</html>